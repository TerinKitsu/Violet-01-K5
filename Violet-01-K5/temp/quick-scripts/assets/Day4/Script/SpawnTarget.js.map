{"version":3,"sources":["SpawnTarget.js"],"names":["cc","Class","extends","Component","properties","targetPrefap","Prefab","gameControler","Node","onLoad","node","on","onTargetSpawn","gameControl","getComponent","width","winSize","height","halfW","halfH","onDestroy","off","start","spawn","event","score","detail","sumScore","isGameOverReturn","log","newTarget","instantiate","randomPotison","setPosition","x","y","parent","Math","random"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,sBAAcL,GAAGM,MADT;AAERC,uBAAeP,GAAGQ;AAFV,KAHP;;AAQLC,UARK,oBAQK;AACN,aAAKC,IAAL,CAAUC,EAAV,CAAa,gBAAb,EAA+B,KAAKC,aAApC,EAAmD,IAAnD;AACA,aAAKC,WAAL,GAAmB,KAAKN,aAAL,CAAmBO,YAAnB,CAAgC,gBAAhC,CAAnB;AACA;AACA,aAAKC,KAAL,GAAaf,GAAGgB,OAAH,CAAWD,KAAX,GAAmB,GAAhC;AACA,aAAKE,MAAL,GAAcjB,GAAGgB,OAAH,CAAWC,MAAX,GAAoB,GAAlC;AACA,aAAKC,KAAL,GAAa,KAAKH,KAAL,GAAa,CAA1B;AACA,aAAKI,KAAL,GAAa,KAAKF,MAAL,GAAc,CAA3B;AACH,KAhBI;AAkBLG,aAlBK,uBAkBM;AACP,aAAKV,IAAL,CAAUW,GAAV,CAAc,gBAAd,EAAgC,KAAKT,aAArC,EAAoD,IAApD;AACH,KApBI;AAuBLU,SAvBK,mBAuBI;AACL,aAAKC,KAAL;AACH,KAzBI;AA2BLX,iBA3BK,yBA2BSY,KA3BT,EA2Be;AAChB,YAAIC,QAAQD,MAAME,MAAN,CAAaD,KAAzB;AACA,aAAKZ,WAAL,CAAiBc,QAAjB,CAA0BF,KAA1B;AACA,aAAKF,KAAL;AACH,KA/BI;AAiCLA,SAjCK,mBAiCE;AACH,YAAG,KAAKV,WAAL,CAAiBe,gBAAjB,EAAH,EAAuC;AAClC,iBAAKlB,IAAL,CAAUW,GAAV,CAAc,gBAAd,EAAgC,KAAKT,aAArC,EAAoD,IAApD;AACA;AACJ;AACDZ,WAAG6B,GAAH,CAAO,IAAP;AACA,YAAIC,YAAY9B,GAAG+B,WAAH,CAAe,KAAK1B,YAApB,CAAhB;AACA,aAAK2B,aAAL;;AAEAF,kBAAUG,WAAV,CAAsB,KAAKC,CAA3B,EAA8B,KAAKC,CAAnC;AACAL,kBAAUM,MAAV,GAAmB,KAAK1B,IAAxB;AACH,KA5CI;AA8CLsB,iBA9CK,2BA8CU;AACX,aAAKE,CAAL,GAAUG,KAAKC,MAAL,KAAgB,KAAKvB,KAAtB,GAA+B,KAAKG,KAA7C;AACA,aAAKiB,CAAL,GAAUE,KAAKC,MAAL,KAAgB,KAAKrB,MAAtB,GAAgC,KAAKE,KAA9C;AACH;AAjDI,CAAT","file":"SpawnTarget.js","sourceRoot":"../../../../../assets/Day4/Script","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        targetPrefap: cc.Prefab,\n        gameControler: cc.Node,\n    },\n\n    onLoad () {\n        this.node.on(\"Target_Clicked\", this.onTargetSpawn, this)\n        this.gameControl = this.gameControler.getComponent('GameController');\n        //Get window scale\n        this.width = cc.winSize.width - 200;\n        this.height = cc.winSize.height - 200;\n        this.halfW = this.width / 2;\n        this.halfH = this.height / 2;\n    },\n\n    onDestroy(){\n        this.node.off(\"Target_Clicked\", this.onTargetSpawn, this);\n    },\n\n\n    start () {\n        this.spawn();\n    },\n\n    onTargetSpawn(event){\n        let score = event.detail.score;\n        this.gameControl.sumScore(score);\n        this.spawn();\n    },\n\n    spawn(){\n        if(this.gameControl.isGameOverReturn()){\n             this.node.off(\"Target_Clicked\", this.onTargetSpawn, this);\n             return;\n        }\n        cc.log(\"AA\");\n        let newTarget = cc.instantiate(this.targetPrefap);\n        this.randomPotison();\n        \n        newTarget.setPosition(this.x, this.y);\n        newTarget.parent = this.node;   \n    },\n\n    randomPotison(){\n        this.x = (Math.random() * this.width) - this.halfW;\n        this.y = (Math.random() * this.height) - this.halfH;\n    }  \n});\n"]}